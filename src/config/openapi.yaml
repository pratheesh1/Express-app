openapi: 3.0.0
info:
  title: Project - 2 API
  description: API for Trend Global DWAD TGC-14 Project 2 (@Pratheesh Soman)
  version: "0.1"
  contact:
    email: pratheesh1269@gmail.com
servers:
  - url: http://localhost:3500/
    description: Development Server

components:
  schemas:
    Trail:
      type: object
      properties:
        _id:
          type: string
          description: the auto-generated id of trail
          example: 6164209817a451ca58ebb51e
        trailName:
          type: string
          description: the name of the trail
          example: Southern Ridges and Labrador Park Loop
        description:
          type: string
          description: detailed text on trail
          example: Southern Ridges and Labrador Park Loop is a 9.0 kilometer lightly trafficked loop trail located near Singapore, Central, Singapore that features beautiful wild flowers and is rated as moderate. The trail is primarily used for hiking, walking, trail running, and nature trips.
        country:
          type: object
          properties:
            id:
              type: integer
              description: id of country
              example: 3041565
            name:
              type: string
              description: name of the country the trail is located at
              example: Singapore
            description:
              type: string
              description: description for the country
              example: An island country in SEA
          required:
            - id
            - name
        tags:
          type: array
          items:
            type: object
            properties:
              description:
                type: string
                description: description of the tag (e.g. wheelchair access)
                example: wheelchair access
              detail:
                type: string
                description: details on the tag (e.g. wheelchair access only until car park)
                example: wheelchair access only until car park
              specialFlags:
                type: string
                description: special flags attached to the tag (e.g. closed, open)
                example: closed
            required:
              - description
              - detail
        review:
          type: array
          items:
            type: object
            properties:
              reviewText:
                type: string
                description: review text
                example: Sunny and warm
              userid:
                type: string
                description: autogenerated user id
                example: T6164209817a451ca58ebb51e
              username:
                type: string
                description: user name
                example: johnsmith1
              rating:
                type: integer
                description: a rating assigned with the review (int from 1-5)
                example: 3
              email:
                type: string
                description: email id
                example: johnsmith@gemail.com
              datetime:
                type: string
                description: date-time when the review was created
                example: "2015-03-25T12:00:00Z"
            required:
              - reviewText
              - username
              - rating
              - email
              - datetime
        accessibility:
          type: array
          items:
            type: string
            description: accessibility options for the trail (e.g. no vehicle access)
          example: [whellchair, bike, stairs]
        difficulty:
          type: integer
          description: difficulty level of the trail (1-easy, 2-medium, 3-hard, 4-challenging)
          example: 3
        timeToComplete:
          type: integer
          description: average time to complete the trail in milliseconds
          example: 500000
        resourcesInRoute:
          type: array
          items:
            type: object
            properties:
              resourceName:
                type: string
                description: description of resource on trail (e.g. cafe at trail checkpoint)
                example: Public toilet
              type:
                type: string
                description: type of resource (e.g. food)
                example: toilet
            required:
              - resourceName
        images:
          type: array
          items:
            type: string
            description: array of image filenames
          example: [T6164209817a451ca58ebb51, T6164209817a451ca58ebb51e]
        createdAt:
          type: datetime
          description: datetime at which the object was created
          example: "2021-10-16T07:58:26.862+00:00"
        updatedAt:
          type: datetime
          description: datetime at which the object was last modified
          example: "2021-10-16T07:58:26.862+00:00"
        __v:
          type: integer
          description: version of the document
          example: 5
      required:
        - trailName
        - description
        - country
        - difficulty
        - timeToComplete
        - images

    Country:
      type: object
      properties:
        _id:
          type: string
          description: the auto-generated id of the country
          example: 6164209817a451ca58ebb51e
        iso:
          type: string
          description: ISO code of the country
          example: IN
        country:
          type: string
          description: name of the country
          example: India
        capital:
          type: string
          description: capital of the country
          example: New Delhi
        currency_code:
          type: string
          description: ISO currency code
          example: INR
        currency_name:
          type: string
          description: name of the currency
          example: Rupee
        currency_symbol:
          type: string
          description: symbol of the currency
          example: €
        phone:
          type: string
          description: ISO international dialing code
          example: "91"
        postal_code_format:
          type: string
          description: postal code format of the country
          example: "@####@@@"
        postal_code_regex:
          type: string
          description: postal code regex of the country
          example: "^(?:AZ)*(\\d{4})$"
        languages:
          type: array
          items:
            type: string
            description: array of languages spoken in the country
          example: ["es-AR", "en", "it", "de", "fr"]
        country_id:
          type: integer
          description: application-wide unique id of the country
          example: 3865483
        cities:
          type: array
          items:
            type: object
            properties:
              city_id:
                type: integer
                description: application-wide unique id of the city
                example: 3427213
              name:
                type: string
                description: name of the city
                example: "Zárate"
            required:
              - city_id
              - name
      required:
        - iso
        - country
        - country_id

tags:
  - name: Trails
    description: trails end point
  - name: Countries
    description: countries end point

paths:
  /trails:
    get:
      summary: returns an array of all trails
      tags:
        - Trails
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Trail"
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
    post:
      summary: add a new trail
      tags:
        - Trails
      requestBody:
        description: a JSON object containing trail information
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Trail"
      responses:
        "201":
          description: Created
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
  /trailCount:
    get:
      summary: returns number of trail records in database
      tags:
        - Trails
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  trailCount:
                    type: integer
                    description: number of records in database
                    example: 526
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
  /trails/{_id}:
    get:
      summary: get trail by id
      tags:
        - Trails
      parameters:
        - in: path
          name: _id
          schema:
            type: string
            required: true
            description: object id of trail object
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Trail"
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
    delete:
      summary: delete trail by id
      tags:
        - Trails
      parameters:
        - in: path
          name: _id
      responses:
        "204":
          description: Deleted
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
    put:
      summary: edit an existing trail
      tags:
        - Trails
      parameters:
        - in: path
          name: _id
          schema:
            type: string
            required: true
            description: object id of trail object
      requestBody:
        description: a JSON object containing updated trail information
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Trail"
      responses:
        "200":
          description: Updated
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
  /countries:
    get:
      summary: returns an array of all countries
      tags:
        - Countries
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    country:
                      type: string
                      description: name of the country
                      example: India
                    country_id:
                      type: integer
                      description: application-wide unique id of the country
                      example: 3865483
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
  /countries/detailed:
    get:
      summary: returns an array of all countries with all available details
      tags:
        - Countries
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Country"
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
  /countries/{id}:
    get:
      summary: get country by id
      tags:
        - Countries
      parameters:
        - in: path
          name: id
          schema:
            type: integer
            required: true
            description: id of the country
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    country:
                      type: string
                      description: name of the country
                      example: India
                    country_id:
                      type: integer
                      description: application-wide unique id of the country
                      example: 3865483
        "404":
          description: Requested resource not found!
        "500":
          description: Server encountered and internal error!
